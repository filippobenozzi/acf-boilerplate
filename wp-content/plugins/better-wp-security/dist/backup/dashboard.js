/*! For license information please see dashboard.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[7274,1511],{67879:(e,t,r)=>{"use strict";r.r(t);var n=r(6293),s=r(95122),o=r(3571),i=r(48015),a=r(8476),c=r(52117),u=r(92819),l=r(82521),d=r(71930),h=r(1528),p=r(31511);const f=(0,c.Z)(d.Tg,{target:"e2seirc5"})({name:"1byzgs2",styles:"display:flex;flex-direction:column;justify-content:space-between;height:100%;overflow:hidden"}),m=(0,c.Z)(d.xv,{target:"e2seirc4"})({name:"1dvcxr3",styles:"padding:1rem"}),g=(0,c.Z)("div",{target:"e2seirc3"})("flex-grow:1;display:flex;align-items:center;justify-content:center;padding:",(({theme:{getSize:e}})=>e(.5)),";"),w=(0,c.Z)(d.Tg,{target:"e2seirc2"})({name:"1dkakdy",styles:"display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;justify-content:center;align-items:center;border-radius:50%;height:120px;width:120px"}),E=(0,c.Z)(d.xv,{target:"e2seirc1"})({name:"15xxqxm",styles:"& sup{position:absolute;font-size:.5em;line-height:1;}"}),v=(0,c.Z)("section",{target:"e2seirc0"})({name:"tsr3y4",styles:"flex-shrink:1;overflow-y:auto;position:relative"}),b={render:(0,i.withDispatch)((e=>({addNotice(t,r){e("core/notices").createSuccessNotice(t,{id:r,context:"ithemes-security"}),setTimeout((()=>e("core/notices").removeNotice(r,"ithemes-security")),1e4)}})))((function({card:e,config:t,addNotice:r}){const o=(0,s._n)("Backup","Backups",e.data.total,"better-wp-security");return(0,n.createElement)(f,null,(0,n.createElement)(h.CardHeader,null,(0,n.createElement)(h.CardHeaderTitle,{card:e,config:t})),(0,u.isEmpty)(e.data)?(0,n.createElement)(m,{as:"p",text:(0,s.__)("Enable database logging or file backups to see a history of completed backups","better-wp-security")}):(0,n.createElement)(React.Fragment,null,(0,n.createElement)(g,null,(0,n.createElement)(w,{as:"section",variant:"secondary"},(0,n.createElement)(E,{size:d.yH.GIGANTIC,variant:d.rK.DARK},(0,p.z8)(e.data.total),e.data.total>99&&(0,n.createElement)("sup",null,"+")),(0,n.createElement)(d.xv,{size:d.yH.LARGE,variant:d.rK.DARK,weight:600,text:o}))),e.data.backups.length>0&&(0,n.createElement)(v,{"aria-label":(0,s.__)("Recent Backups","better-wp-security")},(0,n.createElement)("table",{className:"itsec-card-database-backup__recent-backups"},(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",{scope:"column"},(0,s.__)("Date","better-wp-security")),(0,n.createElement)("th",{scope:"column"},(0,s.__)("Size","better-wp-security")),"files"===e.data.source&&(0,n.createElement)("th",{scope:"column"},(0,n.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Download","better-wp-security"))))),(0,n.createElement)("tbody",null,(0,u.take)(e.data.backups,50).map((t=>(0,n.createElement)("tr",{key:t.url||t.time},(0,n.createElement)("th",{scope:"row"},(0,n.createElement)(d.xv,{weight:600,text:(0,l.dateI18n)("M d, Y g:i A",t.time)})),(0,n.createElement)("td",null,(0,n.createElement)(d.xv,{weight:600,text:t.size_format})),"files"===e.data.source&&(0,n.createElement)("td",null,t.url&&(0,n.createElement)("a",{href:t.url,download:!0},(0,s.__)("Download","better-wp-security")))))))))),(0,n.createElement)(h.CardFooterSchemaActions,{card:e,onComplete:(e,t)=>{e.endsWith("/backup")&&r(t.message,"backup-complete")}}))}))};function y(){const{registerCard:e}=(0,i.useDispatch)("ithemes-security/dashboard");return(0,a.eH)(y,(()=>e("database-backup",b))),null}r.p=window.itsecWebpackPublicPath,(0,s.setLocaleData)({"":{}},"ithemes-security-pro"),(0,o.registerPlugin)("itsec-backup-dashboard",{render:()=>(0,n.createElement)(y,null)})},8476:(e,t,r)=>{"use strict";r.d(t,{r5:()=>m,OR:()=>g,Zk:()=>E,_:()=>v,qq:()=>b,eH:()=>f,gU:()=>c,nP:()=>u,Sj:()=>h,lo:()=>d,vl:()=>i});var n=r(87462),s=r(6293),o=r(9576);function i(e){return(0,o.createHigherOrderComponent)((t=>class extends s.Component{render(){return(0,s.createElement)(t,(0,n.Z)({},this.props,e))}}),"withProps")}var a=r(92819);function c(e,t,r={}){return(0,o.createHigherOrderComponent)((n=>class extends s.Component{constructor(){super(...arguments),this.debouncedPropInvoke=(0,a.debounce)(((...t)=>this.props[e](...t)),"function"==typeof t?t(this.props):t,r),this.handler=(e,...t)=>(e&&"function"==typeof e.persist&&e.persist(),this.debouncedPropInvoke(e,...t))}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return(0,s.createElement)(n,t)}}),"withDebounceHandler")}function u(e,t){let r;return r=(0,a.isFunction)(t)?[{delay:e,cb:t}]:e,(0,o.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of r)(t=>{this.intervalIds.push(setInterval((()=>t(this.props)),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return(0,s.createElement)(e,this.props)}}),"withInterval")}var l=r(4942);(0,o.createHigherOrderComponent)((e=>{var t;return t=class extends s.Component{constructor(...e){super(...e),(0,l.Z)(this,"state",{width:1280}),(0,l.Z)(this,"mounted",!1),(0,l.Z)(this,"ref",null),(0,l.Z)(this,"onWindowResize",(()=>{if(!this.mounted)return;const e=(0,s.findDOMNode)(this);if(e instanceof window.HTMLElement){const t=e.offsetWidth;this.setState({width:t})}}))}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").addEventListener("click",this.onWindowResize),this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").removeEventListener("click",this.onWindowResize)}render(){const{measureBeforeMount:t,...r}=this.props;return t&&!this.mounted?(0,s.createElement)("div",{className:this.props.className,style:this.props.style}):(0,s.createElement)(e,(0,n.Z)({},r,{width:this.state.width+20}))}},(0,l.Z)(t,"defaultProps",{measureBeforeMount:!1}),t}),"withWidth");const d=(0,o.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),(0,l.Z)(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),(0,l.Z)(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return(0,s.createElement)(e,(0,n.Z)({pressedModifierKeys:this.state.pressed},this.props))}}),"withPressedModifierKeys"),h=(0,o.createHigherOrderComponent)((e=>function({navigate:t,...r}){return(0,s.createElement)(e,(0,n.Z)({},r,{onClick:e=>{try{r.onClick&&r.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||r.target&&"_self"!==r.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),t())}}))}),"withNavigate"),p=new WeakMap;function f(e,t){(0,s.useLayoutEffect)((()=>{p.has(e)||(t(),p.set(e,!0))}),[])}function m(e,t=!0){const[r,n]=(0,s.useState)("idle"),[o,i]=(0,s.useState)(null),[a,c]=(0,s.useState)(null),u=(0,s.useCallback)(((...t)=>(n("pending"),c(null),e(...t).then((e=>{i(e),n("success")})).catch((e=>{c(e),i(null),n("error")})))),[e]);return(0,s.useEffect)((()=>{t&&u()}),[u,t]),{execute:u,status:r,value:o,error:a}}function g(e,t,r=window){const n=(0,s.useRef)();(0,s.useEffect)((()=>{n.current=t}),[t]),(0,s.useEffect)((()=>{if(!r||!r.addEventListener)return;const t=e=>n.current(e);return r.addEventListener(e,t),()=>r.removeEventListener(e,t)}),[e,r])}const w=["button","submit"];function E(e){const t=(0,s.useRef)(e);(0,s.useEffect)((()=>{t.current=e}),[e]);const r=(0,s.useRef)(!1),n=(0,s.useRef)(),o=(0,s.useCallback)((()=>{clearTimeout(n.current)}),[]);(0,s.useEffect)((()=>()=>o()),[]),(0,s.useEffect)((()=>{e||o()}),[e,o]);const i=(0,s.useCallback)((e=>{const{type:t,target:n}=e;(0,a.includes)(["mouseup","touchend"],t)?r.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,a.includes)(w,e.type)}return!1}(n)&&(r.current=!0)}),[]),c=(0,s.useCallback)((e=>{e.persist(),r.current||(n.current=setTimeout((()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()}),0))}),[]);return{onFocus:o,onMouseDown:i,onMouseUp:i,onTouchStart:i,onTouchEnd:i,onBlur:c}}function v(e,t){const[r,n]=(0,s.useState)((()=>{try{const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(e){return console.error(e),t}}));return[r,t=>{try{const s=t instanceof Function?t(r):t;n(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}function b(e){const t=(0,s.useRef)(null),r=(0,s.useRef)(!1),n=(0,s.useRef)(e),o=(0,s.useRef)(e);return o.current=e,(0,s.useLayoutEffect)((()=>{e.forEach(((e,s)=>{const o=n.current[s];"function"==typeof e&&e!==o&&!1===r.current&&(o(null),e(t.current))})),n.current=e}),e),(0,s.useLayoutEffect)((()=>{r.current=!1})),(0,s.useCallback)((e=>{t.current=e,r.current=!0,(e?o.current:n.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}},31511:(e,t,r)=>{"use strict";r.d(t,{sE:()=>C,x4:()=>w,PN:()=>m,pL:()=>O,NC:()=>Z,N4:()=>x,g4:()=>W,bK:()=>j,Rg:()=>N,CO:()=>I,AW:()=>L,SU:()=>S,k0:()=>k,ZE:()=>y,UC:()=>R,xJ:()=>_,z8:()=>b,VG:()=>P,Y3:()=>M,bv:()=>v});var n=r(92819),s=r(65096),o=r.n(s),i=r(6293),a=r(73470),c=r(95122),u=r(4942),l=r(13092),d=r(86033);function h(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var p=new WeakMap,f=new WeakMap;class m{constructor(e=void 0,t=void 0,r=void 0){h(this,p,{writable:!0,value:{}}),h(this,f,{writable:!0,value:{}}),(0,u.Z)(this,"add",((e,t,r)=>((0,d.Z)(this,p)[e]||((0,d.Z)(this,p)[e]=[]),(0,d.Z)(this,p)[e].push(t),r&&((0,d.Z)(this,f)[e]||((0,d.Z)(this,f)[e]=[]),(0,d.Z)(this,f)[e].push(r)),this))),(0,u.Z)(this,"hasErrors",(()=>this.getErrorCodes().length>0)),(0,u.Z)(this,"getErrorCodes",(()=>Object.keys((0,d.Z)(this,p)))),(0,u.Z)(this,"getErrorCode",(()=>this.getErrorCodes()[0])),(0,u.Z)(this,"getErrorMessages",((e=void 0)=>{if(e)return(0,d.Z)(this,p)[e];const t=[];for(const e in(0,d.Z)(this,p))(0,d.Z)(this,p).hasOwnProperty(e)&&t.concat((0,d.Z)(this,p)[e]);return t})),(0,u.Z)(this,"getErrorMessage",((e=void 0)=>(e=e||this.getErrorCode(),this.getErrorMessages(e)[0]))),(0,u.Z)(this,"getErrorData",((e=void 0)=>(e=e||this.getErrorCode(),(0,d.Z)(this,f)[e]))),(0,u.Z)(this,"getAllErrorMessages",(()=>{const e=[];for(const t in(0,d.Z)(this,p))(0,d.Z)(this,p).hasOwnProperty(t)&&e.push(...(0,d.Z)(this,p)[t]);return e})),e&&(t&&((0,d.Z)(this,p)[e]=[t]),r&&((0,d.Z)(this,f)[e]=r))}static fromPHPObject(e){const t=new m;return(0,l.Z)(t,p,e.errors),(0,l.Z)(t,f,e.error_data),t}static fromApiError(e){const t=new m;if((0,d.Z)(t,p)[e.code]=[e.message],(0,d.Z)(t,f)[e.code]=[e.data],e.additional_errors)for(const r of e.additional_errors)(0,d.Z)(t,p)[r.code]=[r.message],r.data&&((0,d.Z)(t,f)||(0,l.Z)(t,f,[]),(0,d.Z)(t,f)[r.code].push(r.data));return t}}class g extends Error{constructor(e,...t){super(e.message||(0,c.__)("An unknown error occurred.","better-wp-security"),...t),Error.captureStackTrace&&Error.captureStackTrace(this,g),this.__response=e;for(const t in e)e.hasOwnProperty(t)&&Object.defineProperty(this,t,{value:e[t],configurable:!0,enumerable:!0,writable:!0})}toString(){return this.__response.toString()}getResponse(){return this.__response}}class w{constructor(e,t,r,n=[],s=[],o=[]){(0,u.Z)(this,"type",void 0),(0,u.Z)(this,"error",void 0),(0,u.Z)(this,"data",void 0),(0,u.Z)(this,"success",void 0),(0,u.Z)(this,"info",void 0),(0,u.Z)(this,"warning",void 0),this.type=e,this.error=t,this.data=r,this.success=n,this.info=s,this.warning=o,Object.seal(this)}isSuccess(){return this.type===w.SUCCESS}static async fromResponse(e){const t=t=>{const r=e.headers?.get(`X-Messages-${t}`);return r?JSON.parse(r):[]},r=204!==e.status&&e.json?await e.json():null,n=Z(r),s=n.hasErrors()?w.ERROR:w.SUCCESS,o=t("Success"),i=t("Info"),a=t("Warning");return new w(s,n,r,o,i,a)}}Object.defineProperty(w,"SUCCESS",{value:"success",writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(w,"ERROR",{value:"error",writable:!1,enumerable:!1,configurable:!1});const E=(0,i.createContext)({getUrl(e,t){e="settings"===e?"itsec":"itsec-"+e;const r=(0,a.removeQueryArgs)(document.location.href,...Object.keys((0,a.getQueryArgs)(document.location.href)));return(0,a.addQueryArgs)(r,t?{page:e,path:t}:{page:e})}});function v(e,t){const{getUrl:r}=(0,i.useContext)(E);return r(e,t)}function b(e){if(e<=999)return e.toString();if(e<=9999){const t=(e/1e3).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","k"):`${t}k`}if(e<=99999)return e.toString().substring(0,2)+"k";if(e<=999999)return e.toString().substring(0,3)+"k";if(e<=9999999){const t=(e/1e6).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","m"):`${t}m`}if(e<=99999999)return e.toString().substring(0,2)+"m";if(e<=999999999)return e.toString().substring(0,3)+"m";if(e<=9999999999){const t=(e/1e9).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","b"):`${t}b`}return e}function y(e){if(!(0,n.isPlainObject)(e))return!1;const t=Object.keys(e);return 2===t.length&&t.includes("errors")&&t.includes("error_data")}function k(e){if(!(0,n.isPlainObject)(e))return!1;const t=Object.keys(e);return(3===t.length||4===t.length)&&!(4===t.length&&!t.includes("additional_errors"))&&t.includes("code")&&t.includes("message")&&t.includes("data")}function Z(e){return e instanceof m?e:y(e)?m.fromPHPObject(e):k(e)?m.fromApiError(e):new m}function x(e){const t={};for(const[r,n]of e)t[r]=n;return t}function O(e,t){const r=[[],[]];for(const n of e)r[t(n)?0:1].push(n);return r}function _(e){if(e instanceof Error)throw e;throw new g(e)}const C="https://secure.gravatar.com/avatar/d7a973c7dab26985da5f961be7b74480?s=96&d=mm&f=y&r=g";function S(e,t,r=!0){return(0,n.get)(e,["_links","self",0,"targetHints",t],r?void 0:[])}function L(e){return N(e,"self")}function N(e,t){return(0,n.get)(e,["_links",t,0,"href"])}function I(e,t){if(e&&e.links)for(const r of e.links)if(r.rel===t)return r}function R(e,t){if("object"!==e.type)return e;let r;for(const s in t)t.hasOwnProperty(s)&&"hidden"===t[s]["ui:widget"]&&(r||(r=(0,n.cloneDeep)(e)),delete r.properties[s]);return r||e}function M(e){let t=[];if(!e)return t;const r=e instanceof m?e:Z((0,n.pick)(e,["code","message","data"]));return"rest_invalid_param"===r.getErrorCode()&&(t=Object.values(r.getErrorData().params)),[...r.getAllErrorMessages(),...t]}function P(e){const t=new Date;if(e>t)return(0,c.__)("Online Recently","better-wp-security");const r=Math.floor((t-e)/1e3);let n=r/31536e3;return n>1?(0,c.sprintf)((0,c.__)("%s years","better-wp-security"),Math.floor(n)):(n=r/2592e3,n>1?(0,c.sprintf)((0,c.__)("%s months","better-wp-security"),Math.floor(n)):(n=r/86400,n>1?(0,c.sprintf)((0,c.__)("%s days","better-wp-security"),Math.floor(n)):(n=r/3600,n>1?(0,c.sprintf)((0,c.__)("%s hours","better-wp-security"),Math.floor(n)):(n=r/60,n>1?(0,c.sprintf)((0,c.__)("%s minutes","better-wp-security"),Math.floor(n)):(0,c.sprintf)((0,c.__)("%s seconds","better-wp-security"),Math.floor(n))))))}function W(){return W.instance||(W.instance=new(o())({schemaId:"id"}),W.instance.addMetaSchema(r(27171)),W.instance.addFormat("html",{type:"string",validate:()=>!0}),W.instance.addFormat("relative-file-path",{type:"string",validate:e=>!e.includes("../")}),W.instance.addFormat("file-path",{type:"string",validate:e=>!!e.startsWith("/")&&!e.includes("../")}),W.instance.addFormat("directory",{type:"string",validate:e=>!!e.startsWith("/")&&!e.includes("../")})),W.instance}function j(e){const t=e.toUpperCase().split("").map((e=>127397+e.charCodeAt()));return String.fromCodePoint(...t)}},1528:e=>{e.exports=function(){return this.itsec.dashboard.dashboard}()},64893:e=>{e.exports=function(){return this.wp.components}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},82521:e=>{e.exports=function(){return this.wp.date}()},6293:e=>{e.exports=function(){return this.wp.element}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},81019:e=>{e.exports=function(){return this.wp.keycodes}()},3571:e=>{e.exports=function(){return this.wp.plugins}()},14776:e=>{e.exports=function(){return this.wp.primitives}()},73470:e=>{e.exports=function(){return this.wp.url}()},99196:e=>{"use strict";e.exports=window.React},92819:e=>{"use strict";e.exports=window.lodash}},e=>{e.O(0,[1930,5307],(()=>(67879,e(e.s=67879))));var t=e.O();((window.itsec=window.itsec||{}).backup=window.itsec.backup||{}).dashboard=t}]);